{# nourrir_flask/templates/politique.html #}
{% extends "base.html" %}

{% block title %}Politique dâ€™intÃ©gration â€“ NourrIR{% endblock %}

{% block content %}

<!-- YouTube video embed -->
<div class="video-container" style="margin-bottom: 1.5em; text-align: center;">
  <iframe
    width="560" height="315"
    src="https://www.youtube.com/embed/8c5-p9Ag6Qg"
    title="VidÃ©o de la politique d'intÃ©gration"
    frameborder="0"
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
    allowfullscreen>
  </iframe>
</div>

<!-- PDF Embed -->
<div class="pdf-container" style="width:100%; height:800px; margin-bottom:2em; text-align:center;">
  <iframe src="{{ url_for('static', filename='assets/politique.pdf') }}" width="100%" height="100%" style="border:1px solid #ccc;">
    Ce navigateur ne supporte pas l'affichage de PDFs intÃ©grÃ©s. Vous pouvez le tÃ©lÃ©charger ici :
    <a href="{{ url_for('static', filename='assets/politique.pdf') }}">TÃ©lÃ©charger la politique dâ€™intÃ©gration (PDF)</a>.
  </iframe>
</div>

<!-- Protected Download Link via name verification -->
<div id="name-verification" style="text-align:center; margin-bottom:2em;">
  <label for="name-input" style="font-size:1.1em;">Entrez votre prÃ©nom (en franÃ§ais) pour tÃ©lÃ©charger la politique :</label>
  <input id="name-input" type="text" style="margin:0 0.5em; padding:0.2em 0.4em; font-size:1em;" />
  <button id="name-submit" style="padding:0.3em 0.6em; font-size:1em;">Valider</button>
  <div id="name-error" style="color:red; font-size:0.9em; display:none; margin-top:0.5em;">Nom incorrect. Veuillez rÃ©essayer.</div>
</div>
<div id="download-section" style="text-align:center; margin-bottom:2em; display:none;">
  <a id="download-link" href="{{ url_for('static', filename='assets/politique.pdf') }}" download style="font-size:1.1em;">
    ğŸ“„ TÃ©lÃ©charger la politique dâ€™intÃ©gration (PDF)
  </a>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const submitBtn = document.getElementById('name-submit');
  const nameInput = document.getElementById('name-input');
  const errorDiv = document.getElementById('name-error');
  const downloadSection = document.getElementById('download-section');
  let allowedNames = [];

  fetch('{{ url_for("static", filename="assets/names.json") }}')
    .then(response => response.json())
    .then(data => {
      allowedNames = data.names.map(n => n.toLowerCase());
    })
    .catch(err => console.error('Erreur lors du chargement de la liste des noms', err));

  submitBtn.addEventListener('click', function() {
    const entered = nameInput.value.trim().toLowerCase();
    if (allowedNames.includes(entered)) {
      errorDiv.style.display = 'none';
      downloadSection.style.display = 'block';
      nameInput.disabled = true;
      submitBtn.disabled = true;
    } else {
      errorDiv.style.display = 'block';
    }
  });
});
</script>

<h1>Politique dâ€™intÃ©gration des nouveaux employÃ©Â·eÂ·s</h1>

{# â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” #}
{# 1. INTRODUCTION #}
<h2>1. Introduction&nbsp;ğŸ¯</h2>
<p>
Cette politique vise Ã  structurer le parcours dâ€™accueil (<em>onboarding</em>) chez
<strong>NourrIR</strong> â€” une organisation qui place le bien-Ãªtre mental, la nutrition consciente
et la crÃ©ativitÃ© au cÅ“ur de sa mission&nbsp;ğŸ’œğŸ¥•.  Elle sâ€™adresse aux Ã©quipes RH, aux
gestionnaires ainsi quâ€™aux mentorÂ·eÂ·s afin dâ€™assurer une intÃ©gration <em>humaine</em>,
<em>progressive</em> et <em>durable</em> des nouveaux talents.  Lâ€™intÃ©gration est reconnue comme
un moment critique de lâ€™expÃ©rience employÃ© puisquâ€™elle influence directement la
<b>satisfaction</b>, lâ€™<b>engagement</b> et la <b>rÃ©tention</b>&nbsp;ğŸš€ (Deloitte, 2017).
</p>

{# â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” #}
{# 2. NOTRE VISION DE Lâ€™INTÃ‰GRATION #}
<h2>2. Notre vision de lâ€™intÃ©gration&nbsp;ğŸ‘€</h2>
<p>Chez NourrIR, nous considÃ©rons quâ€™un bon dÃ©part est plus quâ€™un poste prÃªt et
un ordinateur fonctionnel.  Notre dÃ©marche estâ€‰:</p>
<ul>
    <li>ğŸ’¡ <strong>PersonnalisÃ©e</strong> : chaque personne apprend Ã  son rythme ;</li>
    <li>ğŸ“ˆ <strong>Progressive</strong> : jalons clÃ©s rÃ©partis sur les 12 premiers mois ;</li>
    <li>ğŸ¤ <strong>Interactive</strong> : feedback et co-construction continus ;</li>
    <li>ğŸŒ <strong>ConnectÃ©e</strong> : appuyÃ©e par la technologie et lâ€™intelligence collective.</li>
</ul>
<p>Un <em>Portail dâ€™accueil interactif</em> est disponible dÃ¨s la signature de lâ€™offre : il
contient des vidÃ©os-capsules, un calendrier personnalisÃ© et des micro-formations sur
nos valeurs afin de crÃ©er un lien prÃ©coce et durable.</p>

{# â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” #}
{# 3. RÃ”LES & RESPONSABILITÃ‰S #}
<h2>3. RÃ´les et responsabilitÃ©s&nbsp;ğŸ§‘â€ğŸ’¼</h2>
<ul>
    <li><strong>Ã‰quipe RH&nbsp;ğŸ¯</strong> : coordonne le processus, prÃ©pare la trousse, gÃ¨re le tableau de bord.</li>
    <li><strong>Gestionnaire&nbsp;ğŸ‘©â€ğŸ’¼</strong> : accueille, accompagne, anime les suivis Ã  3, 6 et 12 mois.</li>
    <li><strong>Pair dâ€™intÃ©gration&nbsp;ğŸ¤</strong> : soutien informel, transmet la culture et facilite le rÃ©seau.</li>
    <li><strong>NouvelÂ·le employÃ©Â·e&nbsp;ğŸš€</strong> : participe activement, partage son feedback, co-construit son parcours.</li>
</ul>

{# â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” #}
{# 4. PARCOURS D'INTÃ‰GRATION â€“ TIMELINE #}
<h2>4. Parcours dâ€™intÃ©gration&nbsp;ğŸ—ºï¸</h2>

<style>
/* Simple timeline reused from the â€œLes Coulissesâ€ aesthetic */
.timeline { position: relative; margin: 2em 0 2em 1.5em; }
.timeline::before { content: ""; position: absolute; left: 0; top: 0; width: 4px; height: 100%; background: var(--dopamine-purple); border-radius: 2px; }
.timeline-block { position: relative; margin-bottom: 2.2em; padding-left: 1.5em; }
.timeline-block::before { content: ""; position: absolute; left: -9px; top: 0.35em; width: 16px; height: 16px; background: var(--growth-green); border: 3px solid #fff; border-radius: 50%; box-shadow: 0 0 0 2px var(--dopamine-purple); }
.timeline-block h3 { margin-top: 0; }
</style>

<div class="timeline">
    <div class="timeline-block">
        <h3>âœ¨ Avant lâ€™entrÃ©e en poste (J-30 â†’ J1)</h3>
        <ul>
            <li>Envoi dâ€™un courriel de bienvenue personnalisÃ© ğŸ“§ ;</li>
            <li>AccÃ¨s au Portail dâ€™accueil interactif (signature Ã©lectronique, calendrier, micro-formations) ğŸ–¥ï¸ ;</li>
            <li>PrÃ©paration de la trousse (Ã©quipement, accÃ¨s logiciels, etc.) ğŸ ;</li>
            <li>Attribution du pair dâ€™intÃ©gration et ajout aux canaux dâ€™Ã©quipe ğŸ’¬ ;</li>
            <li>Mini-sondage eNPS 48 h avant lâ€™arrivÃ©e pour recueillir les attentes ğŸ“Š.</li>
        </ul>
    </div>

    <div class="timeline-block">
        <h3>ğŸš€ PremiÃ¨re journÃ©e</h3>
        <ul>
            <li>Accueil par le gestionnaire et RH, visite des espaces & Ã©quipes ğŸ‘‹ ;</li>
            <li>Activation du Portail dâ€™accueil : plan interactif & programme de la semaine ğŸ—“ï¸ ;</li>
            <li>Atelier express Â« Moments qui comptent Â» pour cartographier les 90 premiers jours ğŸ—ºï¸ ;</li>
            <li>Capsules vidÃ©o sur la mission, la sÃ©curitÃ© alimentaire & notre IA culinaire ğŸ¥ ;</li>
            <li>Sondage Ã©clair de fin de journÃ©e pour ajuster le lendemain ğŸ“.</li>
        </ul>
    </div>

    <div class="timeline-block">
        <h3>ğŸ“… Suivi Ã  3 mois</h3>
        <ul>
            <li>Rencontre rÃ©troaction 90 jours ;</li>
            <li>Atelier Â« CarriÃ¨re & Apprentissage Â» ;</li>
            <li>Participation Ã  un atelier inter-Ã©quipes pour Ã©tendre le rÃ©seau ğŸ¤— ;</li>
            <li>Suivi de 3 KPI : eNPS 90, complÃ©tion dâ€™apprentissage, Time-To-Productivity.</li>
        </ul>
    </div>

    <div class="timeline-block">
        <h3>â³ Suivi Ã  6 mois</h3>
        <ul>
            <li>Table ronde 360Â° (gestionnaire, mentor, collÃ¨gues, client interne) ;</li>
            <li>DÃ®ner-causerie animÃ© par la recrue ğŸ½ï¸ ;</li>
            <li>Budget de 10 h de formation express sur notre plateforme interne ğŸ“ ;</li>
            <li>Indicateurs : rÃ©alisation 360Â°, utilisation budget, Ã©volution eNPS 180.</li>
        </ul>
    </div>

    <div class="timeline-block">
        <h3>ğŸ‰ Suivi Ã  1 an</h3>
        <ul>
            <li>Atelier accÃ©lÃ©rÃ© dÃ©veloppement & mobilitÃ© interne ;</li>
            <li>CÃ©rÃ©monie Â« Moments qui comptent Â» ğŸ† ;</li>
            <li>Invitation Ã  un projet spÃ©cial (innovation, RSE, etc.) ğŸš€ ;</li>
            <li>Indicateurs : rÃ©tention 12 mois, eNPS annuel, participation projets transversaux.</li>
        </ul>
    </div>

    <div class="timeline-block">
        <h3>ğŸ”„ Ã‰valuation continue</h3>
        <ul>
            <li>Tableau de bord temps rÃ©el alimentÃ© par mini-sondages & donnÃ©es RH ğŸ“ˆ ;</li>
            <li>EnquÃªte qualitative Â« Moments qui comptent Â» Ã  12 mois ğŸ¤” ;</li>
            <li>RÃ©tro-design trimestriel avec nouveaux employÃ©s & mentors ğŸ’¬ ;</li>
            <li>Lien rÃ©sultats â†” actions : dÃ©clenchement automatique de modules de soutien âš™ï¸ .</li>
        </ul>
    </div>
</div>

{# â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” #}
{# 5. NOTE MÃ‰THODOLOGIQUE #}
<h2>5. Note mÃ©thodologique&nbsp;ğŸ§ª</h2>
<p>
Cette politique a Ã©tÃ© rÃ©digÃ©e et enrichie Ã  lâ€™aide dâ€™<strong>outils dâ€™intelligence artificielle</strong>
(principalement ChatGPT).  Les usages IA ont permis :
</p>
<ul>
    <li>ğŸ› ï¸ dâ€™orchestrer et structurer lâ€™information ;</li>
    <li>âœï¸ dâ€™adapter le ton Ã  une audience RH ;</li>
    <li>ğŸ” de valider la cohÃ©rence des rÃ©fÃ©rences ;</li>
    <li>ğŸ¨ de gÃ©nÃ©rer des visuels et micro-contenus de formation.</li>
</ul>

{# â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” #}
{# 6. HISTORIQUE DES VERSIONS #}
<h2>6. Historique des versions&nbsp;ğŸ“œ</h2>
<table border="1" cellpadding="6" style="border-collapse:collapse;background:#fafafd;">
    <tr>
        <th>Version</th>
        <th>Date</th>
        <th>Modifications</th>
        <th>Auteur</th>
    </tr>
    <tr>
        <td>2.0</td>
        <td>24 mai 2025</td>
        <td>Mise Ã  jour complÃ¨te selon la nouvelle politique (Atelier 1)</td>
        <td>Ã‰quipe RH / ChatGPT</td>
    </tr>
    <tr>
        <td>1.0</td>
        <td>17 mai 2025</td>
        <td>Version initiale</td>
        <td>Talent & Culture / ChatGPT</td>
    </tr>
</table>



<!-- HTML for the "Ask NurrIA" popup -->
<div id="ask-nuria-popup" style="display: none; position: absolute; background-color: var(--dopamine-purple); color: white; padding: 8px 12px; border-radius: 20px; cursor: pointer; z-index: 1050; box-shadow: 0 2px 10px rgba(0,0,0,0.2); font-size: 0.9em; transition: opacity 0.2s, transform 0.2s;">
    Demander Ã  NurrIA ğŸ’¡
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const askNuriaPopup = document.getElementById('ask-nuria-popup');
    const policyContentArea = document.querySelector('main'); // Target the main content area
    let currentSelectedText = '';
    let popupIsVisible = false;

    if (!askNuriaPopup || !policyContentArea) {
        console.warn('Ask NurrIA feature: Required elements (popup or content area) not found.');
        return;
    }

    function showAskPopup(x, y) {
        // Adjust x to ensure popup doesn't go off-screen right, with a small buffer
        const maxX = window.innerWidth - askNuriaPopup.offsetWidth - 15;
        const finalX = Math.min(x, maxX);
        
        askNuriaPopup.style.left = finalX + 'px';
        askNuriaPopup.style.top = y + 'px';
        askNuriaPopup.style.display = 'block';
        askNuriaPopup.style.opacity = '1'; // For fade-in effect
        askNuriaPopup.style.transform = 'translateY(0)';
        popupIsVisible = true;
    }

    function hideAskPopup() {
        askNuriaPopup.style.opacity = '0';
        askNuriaPopup.style.transform = 'translateY(-5px)'; // Slight move up on hide
        setTimeout(() => {
            if (askNuriaPopup.style.opacity === '0') {
                askNuriaPopup.style.display = 'none';
            }
        }, 200); // Corresponds to transition duration
        popupIsVisible = false;
    }

    policyContentArea.addEventListener('mouseup', (event) => {
        // Do not proceed if the event target is the popup itself or inside it
        if (askNuriaPopup.contains(event.target)) {
            return;
        }

        const selection = window.getSelection();
        const selectedText = selection.toString().trim();

        if (selectedText.length > 0) {
            currentSelectedText = selectedText;
            const range = selection.getRangeAt(0);
            const rect = range.getBoundingClientRect();
            
            let popupX = event.pageX + 5; 
            let popupY = event.pageY - askNuriaPopup.offsetHeight - 10; // Position above cursor

            // Boundary check: if popup would be above viewport, position below selection's bottom
            if ((window.scrollY + rect.top - askNuriaPopup.offsetHeight - 10) < window.scrollY) {
                 popupY = window.scrollY + rect.bottom + 10;
            }
            // Boundary check: if popup would be too far left (e.g., selection ends near left edge)
            if (event.clientX < (askNuriaPopup.offsetWidth / 2) + 10) { // 10px buffer
                popupX = event.pageX + 5; // Keep it to the right of cursor
            } 
            // Boundary check: if popup would be too far right
            else if (window.innerWidth - event.clientX < (askNuriaPopup.offsetWidth / 2) + 10) {
                popupX = event.pageX - askNuriaPopup.offsetWidth - 5; // To the left of cursor
            }


            showAskPopup(popupX, popupY);
        } else {
            // If no text is selected (e.g., just a click on policy content) and popup is visible, hide it.
            if (popupIsVisible && !askNuriaPopup.contains(event.target)) {
                 hideAskPopup();
            }
        }
    });

    askNuriaPopup.addEventListener('click', (event) => {
        event.stopPropagation(); // Prevent mousedown on document from hiding popup immediately

        if (currentSelectedText) {
            const chatBox = document.getElementById('nuria-chatbot-box'); 
            const chatToggle = document.getElementById('nuria-chatbot-toggle'); 
            const chatInput = document.getElementById('nuria-chat-input'); 

            if (chatBox && chatInput) { // chatToggle might be null if already hidden
                chatBox.style.display = 'flex';
                if (chatToggle) chatToggle.style.display = 'none'; // Hide toggle if visible
                
                chatInput.value = \`Peux-tu m'en dire plus sur : "${currentSelectedText}" ?\`;
                chatInput.focus(); 
            } else {
                console.warn('NurrIA chatbot elements not found in base.html for popup interaction.');
            }
        }
        hideAskPopup();
        currentSelectedText = ''; // Clear text after use
        // Clear browser selection
        if (window.getSelection) {
            if (window.getSelection().empty) { window.getSelection().empty(); } 
            else if (window.getSelection().removeAllRanges) { window.getSelection().removeAllRanges(); }
        } else if (document.selection) { document.selection.empty(); }
    });

    // General click listener to hide popup if clicking outside
    document.addEventListener('mousedown', (event) => {
        if (popupIsVisible && !askNuriaPopup.contains(event.target)) {
            // If a new selection is being made, mouseup on policyContent will handle it.
            // This primarily handles clicks completely outside the policy content or popup.
            const selection = window.getSelection();
            if (!selection || selection.toString().trim() === '') { // Only hide if no new selection is being made
                 hideAskPopup();
            }
        }
    });
});
    </script>

    <div class="presentation-container" style="text-align: center; margin: 2em 0;">
        <h2>PrÃ©sentation interactive (Canva)</h2>
        <iframe src="https://www.canva.com/design/DAGn7T8JUpQ/view?embed" style="width:100%; height:600px; border:0;" allowfullscreen="allowfullscreen" loading="lazy"></iframe>
    </div>

{% endblock %}
